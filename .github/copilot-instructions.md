# Copilot Instructions

This document provides instructions for AI coding agents to effectively contribute to the `n8n-nodes-truelime-docs` repository.

## Project Overview

This project is a custom node for [n8n](https://n8n.io/), a workflow automation tool. The node, `LimescapeDocs`, integrates with the Limescape Docs API for OCR and document extraction.

The project is written in TypeScript and follows the standard structure for n8n community nodes.

## Key Files and Directories

-   `nodes/LimescapeDocs/LimescapeDocs.node.ts`: This is the main file for the node. It defines the node's properties, operations, and the `execute` method that contains the core logic.
-   `credentials/LimescapeDocsApi.credentials.ts`: This file defines the authentication mechanism for the Limescape Docs API.
-   `package.json`: Defines project metadata, scripts, and dependencies. Note the `n8n` section, which points to the compiled node and credential files.
-   `dist/`: This directory contains the compiled JavaScript files that are actually used by n8n. It's generated by the build process. **Do not edit files in this directory directly.**

## Developer Workflow

The project uses `pnpm` as the package manager.

### Setup

1.  Install dependencies: `pnpm install`

### Development

-   To build the project once: `pnpm build`
    -   This command runs `tsc` to compile the TypeScript files into JavaScript in the `dist/` directory.
    -   It also runs `gulp build:icons` to copy the node icon into the `dist/` directory.
-   For continuous compilation during development: `pnpm dev`

### Linting and Formatting

-   To check for linting errors: `pnpm lint`
-   To automatically fix linting errors: `pnpm lintfix`
-   To format the code: `pnpm format`

### Local Testing

To test the node locally, you need to link it to your n8n installation. Refer to the official n8n documentation for [running your node locally](https://docs.n8n.io/integrations/creating-nodes/test/run-node-locally/).

## Key Dependencies

This project has a critical local dependency: `limescape-docs-processor`. It is included as a `.tgz` file in the root of the repository (e.g., `limescape-docs-processor-1.1.20.tgz`) and is referenced in `package.json` with a `file:` protocol.

When this dependency is updated, the `.tgz` file in the repository must be replaced, and the `package.json` file must be updated to point to the new version. After updating, run `pnpm install` to use the new version.

## Architectural Patterns

-   The node implementation in `LimescapeDocs.node.ts` follows the `IExecuteFunctions` interface from n8n. The `execute` method is the entry point for the node's execution.
-   The node defines a set of operations (e.g., 'extract', 'process') that the user can select in the n8n UI. The logic for each operation is typically handled within the `execute` method.
-   API calls to the Limescape Docs service are made using the credentials provided through `LimescapeDocsApi.credentials.ts`.
